<html>
<body>
	<script src="vendor/pixi.min.js"></script>
	<script src="boilerplate.js"></script>
	<script>
		// Experiment 2. Using pixi library
		var renderer = new PIXI.CanvasRenderer(WIDTH, HEIGHT);

		// var renderer = new PIXI.WebGLRenderer(WIDTH, HEIGHT);
		document.body.appendChild(renderer.view);

		var stage = new PIXI.Container();


		var BATCH = 2700;
		var sprites = [];

		for (var i = 0; i < BATCH; i++) {

			var x = Math.random() * WIDTH;
			var y = Math.random() * HEIGHT;

			var w = Math.random() * WIDTH / 4;
			var h = Math.random() * HEIGHT / 4;


			// Not sure how to use this...
			// var graphics = new PIXI.Rectangle(x, y, w, h)

			/**/
			var graphics = new PIXI.Graphics();



			graphics.beginFill(0xffeeff);
			graphics.lineStyle(1, 0x000000, 1);

			// draw a rectangle
			graphics.drawRect(x, y, w, h);

			// This is slower
			// graphics.moveTo(x, y);
			// graphics.lineTo(x + w, y);
			// graphics.lineTo(x + w, y + h);
			// graphics.lineTo(x, y + h);
			// graphics.lineTo(x, y);
			// graphics.endFill();




			stage.addChild(graphics);
			sprites.push(graphics);

		}


		function draw() {

			rects += BATCH;

			for (var i = 0; i < BATCH; i++) {
				var x = Math.random() * WIDTH;
				var y = Math.random() * HEIGHT;

				var w = Math.random() * WIDTH / 4;
				var h = Math.random() * HEIGHT / 4;

				// sprites[i].drawRect(x, y, w, h);

				// sprites[i].scale.x = Math.random();
				// sprites[i].scale.y = Math.random();

				var sprite = sprites[i];
				sprite.position.x = x;
				sprite.position.y = y;
				sprite.width = w;
				sprite.height = h;
			}

			renderer.render(stage);
		}

		setTimeout(start, 500);

	</script>
</body>
</html>