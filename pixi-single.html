<html>
<body>
	<script src="vendor/pixi.min.js"></script>
	<script src="boilerplate.js"></script>
	<script>
		// Experiment 2b. Using pixi library with WebGL + single sprite
		var renderer = new PIXI.CanvasRenderer(WIDTH, HEIGHT);

		// var renderer = new PIXI.WebGLRenderer(WIDTH, HEIGHT);
		document.body.appendChild(renderer.view);

		var stage = new PIXI.Container();


		var BATCH = 2000;
		var sprites = [];

		var graphics = new PIXI.Graphics();

		stage.addChild(graphics);


		function draw() {

			rects += BATCH;

			graphics.clear();
			graphics.beginFill(0xffeeff);
			graphics.lineStyle(1, 0x000000, 1);

			for (var i = 0; i < BATCH; i++) {

				var x = Math.random() * WIDTH;
				var y = Math.random() * HEIGHT;

				var w = Math.random() * WIDTH / 4;
				var h = Math.random() * HEIGHT / 4;

				graphics.drawRect(x, y, w, h);

				// This is slower
				// graphics.moveTo(x, y);
				// graphics.lineTo(x + w, y);
				// graphics.lineTo(x + w, y + h);
				// graphics.lineTo(x, y + h);
				// graphics.lineTo(x, y);
				// graphics.endFill();

			}

			renderer.render(stage);
		}

		setTimeout(start, 500);

	</script>
</body>
</html>